<ul class="photos-list-inner clearfix">
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0374.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Venice</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0487.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Venice</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0546.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Venice</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0634.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0675.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0688.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0791.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0808.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0847.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0369.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Venice</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0423.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Venice</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0426.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Venice</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0627.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0754.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Italy/IMG_0897.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Roma</p>
            </div>
        </a>
    </li>
</ul>
<script>
    $(function() {
        var windowTop,
                $window = window,
                $photosLink = $(".photos-lineup-link");

        //button押した時の挙動
        $photosLink.on("click", function (e) {

            var index = $photosLink.index(this),
                    $imgHeight = $photosLink.eq(index).height();

            //もともとの機能を中断させる
            e.preventDefault();

            //波紋のアニメーションになる要素を追加
            $(this).append("<span></span>");

            /*追加した部分▼*/

            var $span = $(this).find("span"),　//波紋アニメーションの変数
                    offSet = $(this).offset(), //ボタンの位置を取得
                    offSetY = event.pageY - offSet.top, //縦のボタンの位置と押した時の座標を計算
                    offSetX = event.pageX - offSet.left;　//横のボタンの位置と押した時の座標を計算

            //波紋アニメーションに計算した座標のポジションを代入
            $span.css({
                top: offSetY,
                left: offSetX
            });

            //波紋アニメーションを1.8秒表示させてから要素を消す
            $window.setTimeout(function () {
                $span.remove();
            }, 1000);

            setTimeout(function () {
                photosSrc = $(".photos-lineup-link img").eq(index).attr("src");
                windowTop = $(window).scrollTop();
                animateTop = {
                    position: "fixed",
                    width: "100%",
                    top: -1 *  windowTop
                };

                $(".wrapper").css(animateTop);

                $(".photo-detail-overlay").fadeIn();

                $(".overlay-photo-inner img").attr("src", photosSrc);

                if($imgHeight > 286) {
                    $(".overlay-photo-inner").css("width","40%");
                } else {
                    $(".overlay-photo-inner").css("width","72%");
                }

                $(".overlay-photo img").animate({scale:"1"},200);

            }, 700);
        });

        $("#overlay-quit").click(function () {

            $(".wrapper").attr({style:""});
            $("body").prop({ scrollTop: windowTop });

            $(".overlay-photo img").animate({scale:"0.1"},200);

            $(".photo-detail-overlay").fadeOut();
        });
    });
</script>
