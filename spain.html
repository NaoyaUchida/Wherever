<ul class="photos-list-inner clearfix">
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182683.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182688.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182699.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182724.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182727.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182729.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182731.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182734.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182737.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182764.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182774.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182799.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3182817.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3192850.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3192858.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3192979.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3192989.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203069.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203087.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203089.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203098.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203184.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203185.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203195.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203241.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203262.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203268.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203275.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3213340.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3213344.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3213408.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Madrid</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3223467.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Madrid</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3223484.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Madrid</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3203182.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Barcelona</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3223526.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Madrid</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/IMG_3928.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Valencia</p>
            </div>
        </a>
    </li>
    <li class="photos-lineup">
        <a class="photos-lineup-link" href="javascript:void(0);">
            <img src="photos/Spanish/P3223529.jpg" alt="sceneImg"/>
            <div class="photo-overlay">
                <p>Madrid</p>
            </div>
        </a>
    </li>
</ul>
<script>
    $(function() {
        var windowTop,
                $window = window,
                $photosLink = $(".photos-lineup-link");

        //button押した時の挙動
        $photosLink.on("click", function (e) {

            var index = $photosLink.index(this),
                    $imgHeight = $photosLink.eq(index).height();

            //もともとの機能を中断させる
            e.preventDefault();

            //波紋のアニメーションになる要素を追加
            $(this).append("<span></span>");

            /*追加した部分▼*/

            var $span = $(this).find("span"),　//波紋アニメーションの変数
                    offSet = $(this).offset(), //ボタンの位置を取得
                    offSetY = event.pageY - offSet.top, //縦のボタンの位置と押した時の座標を計算
                    offSetX = event.pageX - offSet.left;　//横のボタンの位置と押した時の座標を計算

            //波紋アニメーションに計算した座標のポジションを代入
            $span.css({
                top: offSetY,
                left: offSetX
            });

            //波紋アニメーションを1.8秒表示させてから要素を消す
            $window.setTimeout(function () {
                $span.remove();
            }, 1000);

            setTimeout(function () {
                photosSrc = $(".photos-lineup-link img").eq(index).attr("src");
                windowTop = $(window).scrollTop();
                animateTop = {
                    position: "fixed",
                    width: "100%",
                    top: -1 *  windowTop
                };

                $(".wrapper").css(animateTop);

                $(".photo-detail-overlay").fadeIn();

                $(".overlay-photo-inner img").attr("src", photosSrc);

                if($imgHeight > 286) {
                    $(".overlay-photo-inner").css("width","40%");
                } else {
                    $(".overlay-photo-inner").css("width","72%");
                }

                $(".overlay-photo img").animate({scale:"1"},200);

            }, 700);
        });

        $("#overlay-quit").click(function () {

            $(".wrapper").attr({style:""});
            $("body").prop({ scrollTop: windowTop });

            $(".overlay-photo img").animate({scale:"0.1"},200);

            $(".photo-detail-overlay").fadeOut();
        });
    });
</script>
